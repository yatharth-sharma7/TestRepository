<apex:page controller="ContAndOpprForAccount">
    <style>
        table {
            border: solid 1px rgb(202, 226, 226);
            border-collapse: collapse;
            border-spacing: 0;
            font: normal 13px Arial, sans-serif;
            width: 100%;
        }
        
        th {
            background-color: rgb(0, 132, 255);
            border: solid 1px rgb(221, 238, 238);
            color: rgb(255, 255, 255);
            text-shadow: 1px 1px 1px rgb(0, 0, 0);
            text-align: left;
            padding: 8px;
            width:25%;
        }
        td{
            border: solid 1px rgb(221, 238, 238);
            color: rgb(51, 51, 51);
            padding: 8px;
            text-align: left;
            width:25%;
            text-shadow: 1px 1px 1px rgb(255, 255, 255);
        }
        
    
    </style>
    <apex:form >
        <apex:pageblock >
            <table border="3" class="outer-table">
                <tr>
                    <th>S.No</th>
                    <th>Account Name</th>
                    <th>Rating</th>
                    <th>Industry</th>
                    <th>Website</th>
                </tr>
                <apex:variable var="k" value="{!0}"/>
                <apex:repeat value="{!lstwrap}" var="w" >
                <tr>   
                    <apex:variable var="k" value="{!k+1}"/>
                    <td >{!k}</td>
                    <td>{!w.acc.name}</td>
                    <td>{!w.acc.rating}</td>   
                    <td>{!w.acc.industry}</td>   
                    <td>{!w.acc.site}</td>  
                </tr>
                <tr ><!--rendered="{!IF(w.cont.size>0,'true','false')}"-->
                    <td></td>
                    <th>Contact details</th>
                
                    <td colspan="3">
                        <table border="1" class="inner-table">
                            <tr>
                                <th>S.No</th>
                                <th>Contact Name</th>
                                <th>Phone</th>
                                <th>Email</th>
                                <th>Account Name</th>
                            </tr>
                        <apex:variable var="i" value="{!0}"/>
                        <apex:repeat value="{!w.cont}" var="c">
                            <tr>   
                                <apex:variable var="i" value="{!i+1}"/>
                                <td>{!i}</td>
                                <td>{!c.name}</td>
                                <td>{!c.phone}</td>   
                                <td>{!c.Email}</td>   
                                <td><a href="https://ap16.lightning.force.com/lightning/r/Account/{!w.acc.id}/view" target="_blank">{!w.acc.name}</a></td>  
                            </tr>                     
                        </apex:repeat>
                        </table>
                        <br/>
                    </td>
                </tr>
                <tr ><!--rendered="{!IF(w.oppl.size>0,'true','false')}"-->
                    <td></td>
                <th>Opportunity details</th>
            
                <td colspan="3">
                    <table border="1" class="inner-table">
                        <tr>
                            <th>S.No</th>
                            <th>Opportunity Name</th>
                            <th>Stage Name</th>
                            <th>Probablity</th>
                            <th>Account Name</th>
                        </tr>
                    <apex:variable var="j" value="{!0}"/>
                    <apex:repeat value="{!w.oppl}" var="o">
                        <tr>   
                            <apex:variable var="j" value="{!j+1}"/>
                            <td>{!j}</td>
                            <td>{!o.name}</td>
                            <td>{!o.stageName}</td>   
                            <td>{!o.probability}</td>   
                            <td><a href="https://ap16.lightning.force.com/lightning/r/Account/{!w.acc.id}/view" target="_blank">{!w.acc.name}</a></td>  
                        </tr>                     
                    </apex:repeat>
                    </table>
                    <br/>
                </td>
            </tr>
            </apex:repeat> 
        </table>       
        </apex:pageblock>
    </apex:form>
</apex:page>