<apex:page controller="AccountController" docType="html-5.0">
    <style>
        table {
            border: solid 1px rgb(202, 226, 226);
            border-collapse: collapse;
            border-spacing: 0;
            font: normal 13px Arial, sans-serif;
            width: 100%;
        }
        
        th {
            background-color: rgb(0, 132, 255);
            border: solid 1px rgb(221, 238, 238);
            color: rgb(255, 255, 255);
            text-shadow: 1px 1px 1px rgb(0, 0, 0);
            text-align: left;
            padding: 8px;
            width:25%;
        }
        td{
            border: solid 1px rgb(221, 238, 238);
            color: rgb(51, 51, 51);
            padding: 8px;
            text-align: left;
            width:25%;
            text-shadow: 1px 1px 1px rgb(255, 255, 255);
        }
        
        tr:nth-child(even) {
            background-color: #dddddd;
        }
    </style>
    <script>
   function checkLength(obj){
           var name = obj.value;
            if(name.length>3)
            {
                searchAccount();
            }
        }
    </script>
    <apex:pageBlock id="parent">
    <apex:form >
        <div align="center" >
            <br/>
        <apex:inputText value="{!searchname}" label="input" onkeyup="checkLength(this)"/>
        <apex:actionFunction name="searchAccount" action="{!search}" reRender="parent,form1"/>
            <br/>
            
        </div>
        <br/>
    </apex:form>
    <apex:form rendered="true">
        <div align="Center" >
            <apex:repeat value="{!pageNoList}" var="page">
            <apex:commandbutton action="{!showList}" reRender="parent" value="{!page}" >
                <apex:param name="pageno" value="{!page}"/>
            </apex:commandbutton>  
        </apex:repeat>
        </div>

    </apex:form>
    
    
    <br/>
    
       <apex:form id="form1" rendered="true" >
        <apex:pageBlock title="Result" id="pblock1" rendered="{!val==true}">
            <table>
                <tr>
                    <th>Id</th>
                    <th>Name</th>
                    <th>Phone</th>
                    <th>Website</th>
                    <th>Action</th>
                </tr>  
            </table>
            <apex:repeat value="{!pageList}" var="c" id="theRepeat">
                <table >
                    <tr><td>{!c.Id}</td>
                        
                        <td>
                            <apex:inputField value="{!c.Name}" rendered="{!c.id==getAcc.Id}" />
                            <apex:outputText value="{!c.Name}" rendered="{!if(c.id!=getAcc.Id,true,false)}"/>
                            
                        </td>
                        <td>
                            <apex:inputField value="{!c.Phone}" rendered="{!c.id==getAcc.Id}" />
                            <apex:outputText value="{!c.Phone}" rendered="{!if(c.id!=getAcc.Id,true,false)}"/>
                        </td>
                        <td>
                            <apex:inputField value="{!c.site}" rendered="{!c.id==getAcc.Id}" />
                            <apex:outputText value="{!c.site}" rendered="{!if(c.id!=getAcc.Id,true,false)}"/>
                        </td>
                        <td>
                            <div align="center">
                                <apex:commandButton value="Edit" action="{!editAccName}" reRender="form1" rendered="{!if(c.id!=getAcc.Id,true,false)}">
                                    <apex:param name="accountid" value="{!c.id}" />
                                </apex:commandButton>
                                <apex:commandButton value="Save" action="{!saveAccName}" reRender="form1" rendered="{!c.id==getAcc.Id}">
                                </apex:commandButton>
                            </div>
                        </td>
                    </tr>
                </table>    
            </apex:repeat>
        </apex:pageBlock>
    </apex:form>
        </apex:pageBlock>
</apex:page>